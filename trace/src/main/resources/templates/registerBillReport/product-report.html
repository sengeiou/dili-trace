 <#body>
    <div class="easyui-layout" fit="true">
        <!-- ====================================================================================================================== -->
        <!-- 上方布局 -->
        <!-- ====================================================================================================================== -->
        <div region="north" height="auto" align="center">
            <!--<div id="nav" class="top-pos-box">
                <span><img class="nav-pos-icon" src="${contextPath}/resources/images/pos-icon.png">当前位置:</span>
                <span>登记单管理&nbsp&gt;</span>
                <span><a class="link-text" href="">登记单列表</a></span>
            </div>-->
            <!-- =========================================================表单========================================================= -->
            <div class="easyui-panel" style="width:100%;" align="left">
                <form id="queryForm" class="easyui-form" method="post" fit="true">
                    <div class="search-wrap">

                        <div class="search-item long-item">
                            <input class="easyui-datebox" name="createdStart" id="createdStart" style="width:58%" labelAlign="right" data-options="label:'登记时间'" value="${createdStart!}"/>
                            <span style="width: 2%;">-</span>
                            <input class="easyui-datebox" name="createdEnd" id="createdEnd" style="width:39%;" value="${createdEnd!}"/>
                        </div>
                        <div class="search-item">
                            <input  name="registerSource" id="registerSource" style="width:100%" labelAlign="right" data-options="label:'登记来源'"  panelWidth="auto" panelHeight="auto"/>
                            <#comboProvider _id="registerSource" _provider='registerSourceProvider' _queryParams='{emptyText:"全部"}' />
                        </div>
                        <div class="search-item">
                            <input  name="tradeTypeId" id="tradeTypeId" style="width:100%" labelAlign="right" data-options="label:'交易区'"  panelWidth="auto" panelHeight="auto"/>
                            <#comboProvider _id="tradeTypeId" _provider='tradeTypeProvider' _queryParams='{emptyText:"全部"}' />
                        </div>
                        <div class="search-item">
                            <input class="easyui-textbox" name="productName" id="productName" style="width:100%" labelAlign="right" data-options="label:'商品:'" />
                        </div>
                        <div class="search-wrap-btn">
                            <a href="#" class="easyui-linkbutton" iconCls="icon-search" id="queryBtn"
                               onclick="queryRegisterBillGrid()">查询</a>&nbsp;&nbsp;
                            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-clear" onclick="clearQueryForm()">清除</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- ====================================================================================================================== -->
        <!-- 中央布局 -->
        <!-- ====================================================================================================================== -->
        <!-- 表格 -->
        <div region="center" style="width:100%;" height="auto">
            <!-- =========================================================表格========================================================= -->
            <table class="easyui-datagrid" title="登记单列表" id="registerBillGrid" fitColumns="true" noheader="true"
                   pagination="true" pageSize="30" pageNumber="1" pagePosition="top" border="false" 
                   loadMsg="数据加载中..." singleSelect="false" method="post" multiSort="false" sortName="totalWeight" sortOrder="desc"
                   align="center" fit="true" idField="id" selectOnCheck="true" data-options="">
                <thead>
                    <tr>
                        <th width="4%" data-options="field:'productName',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            商品名称
                        </th>
                        <th width="4%" data-options="field:'totalWeight',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            重量/KG
                        </th>
                        <th width="4%" data-options="field:'momWeight',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyWeight',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        
                        <th width="4%" data-options="field:'cnt',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            进场次数
                        </th>
                        <th width="4%" data-options="field:'momCnt',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyCnt',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        
                        
                        <th width="4%" data-options="field:'totalCheckingOrRechecking',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            采样客户数量
                        </th>
                        <th width="4%" data-options="field:'momCheckingOrRechecking',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyCheckingOrRechecking',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        
                        
                        <th width="4%" data-options="field:'totalCheckedOrRechecked',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            检测数量
                        </th>
                        <th width="4%" data-options="field:'momCheckedOrRechecked',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyCheckedOrRechecked',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        
                        
                        
                             <th width="4%" data-options="field:'totalRechecked',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            复检数量
                        </th>
                        <th width="4%" data-options="field:'momRechecked',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyRechecked',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        

                             <th width="4%" data-options="field:'successfulInitalCheckedRate',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            初检合格率
                        </th>
                          <th width="4%" data-options="field:'successfulRecheckedRate',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            复检合格率
                        </th>
                        
                        
                        
                        
                        

     <th width="4%" data-options="field:'totalHascertifiy',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            产地证明
                        </th>
     <th width="4%" data-options="field:'hascertifiyRate',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            产地占进场占比
                        </th>
                        <th width="4%" data-options="field:'momHascertifiy',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyHascertifiy',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        

	     <th width="4%" data-options="field:'totalHasdetectreport',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                           检测报告
                        </th>
     <th width="4%" data-options="field:'hasdetectreportRate',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            检测报告占进场占比 
                        </th>
                        <th width="4%" data-options="field:'momHasdetectreport',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            环比
                        </th>
                        <th width="4%" data-options="field:'yoyHasdetectreport',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                            同比
                        </th>
                        
                        	     <th width="4%" data-options="field:'checkingOrRecheckingRate',   sortable:true, order:'asc', align:'center', resizable:'true', fixed:'false'">
                           检测占进场占比
                        </th>
                   </tr>
                </thead>
            </table>
        </div>
    </div>
   <!-- 隐藏编辑框 -->
       <!-- ====================================================================================================================== -->
    <!-- style & script 分隔线 -->
    <!-- ====================================================================================================================== -->
     <script src="http://base.nong12.com/static/log/log.build.js"></script>
     <link rel="stylesheet" type="text/css" href="${contextPath!}/resources/jquery-file-upload/css/jquery.fileupload.css">
     <script src="${contextPath!}/resources/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
     <script src="${contextPath!}/resources/jquery-file-upload/js/jquery.iframe-transport.js"></script>
     <script src="${contextPath!}/resources/jquery-file-upload/js/jquery.fileupload.js"></script>
     <script src="/resources/assets/dep/jquery/layer/layer.js"></script>
     <script type="text/javascript">
    //表格查询

    function queryRegisterBillGrid() {
        var opts = _registerBillGrid.datagrid("options");
        if (null == opts.url || "" == opts.url) {
            opts.url = "${contextPath}/registerBillReport/listPageGroupByProduct.action";
        }

        if(!$('#queryForm').form("validate")){
            return false;
        }

        _registerBillGrid.datagrid("load", bindGridMeta2Form("registerBillGrid", "queryForm"));

    }
        //清空表单
    function clearQueryForm() {
        $('#queryForm').form('clear');
        $('#plate').combobox('loadData',[])
    }

    //表格表头右键菜单
    function headerContextMenu(e, field){
        e.preventDefault();
        if (!cmenu){
            createColumnMenu("registerBillGrid");
        }
        cmenu.menu('show', {
            left:e.pageX,
            top:e.pageY
        });
    }

    /**
     * 绑定页面回车事件，以及初始化页面时的光标定位
     * @formId
     *          表单ID
     * @elementName
     *          光标定位在指点表单元素的name属性的值
     * @submitFun
     *          表单提交需执行的任务
     */
    $(function () {
        window._registerBillGrid = $('#registerBillGrid');
        bindFormEvent("queryForm", "registerSource", queryRegisterBillGrid);
        queryRegisterBillGrid();
    })


    /**
     * 初始化用户列表组件
     */
    function initRegisterBillGrid() {
        var pager = _registerBillGrid.datagrid('getPager');
        var toolbar=[
            <#resource method="post" url="registerBillReport/product-report.html#export">
                {
                    iconCls:'icon-export',
                    text:'导出',
                    handler:function(){
                   	 layer.confirm('确认导出数据?', {
                         type: 0,
                         title: '提示',
                         btn: ['确定','取消'],
                         yes:function(){
                        	 layer.closeAll();
                        	 doExport('registerBillGrid');
                         }
                     });
                       
                    }
                }
            </#resource>
            ]
        _registerBillGrid.datagrid({
            toolbar:toolbar
        });
        pager.pagination({
            <#controls_paginationOpts/>,
            //buttons:toolbar

        });
    }

    </script>

 </#body>